# Ch2 Regression and model validation

'''
*Describe the work you have done this week and summarize your learning.*

- Describe your work and results clearly. 
- Assume the reader has an introductory course level understanding of writing and reading R code as well as statistical methods.
- Assume the reader has no previous knowledge of your data or the more advanced methods you are using.
'''

```{r}
date()
```

Here we go again...

## Libraries used for Ch2

Load the needed R packages before getting to work:
Obs! You might need to install the packages first if you haven't used them before (install.packages()).
```{r}
#install.packages(c("tidyverse","GGally","readr"))
library(tidyverse)
library(GGally)
library(readr)
```


## Data wrangling

### 1. Read data (1p.)
I created a new data folder in my IODS-project folder. It includes an R script named 'create_learning2014.R', which is the R code for this data wrangling part of Assignment 2.
The original data I'm using is the full learning2014 data downloaded from [here](http://www.helsinki.fi/~kvehkala/JYTmooc/JYTOPKYS3-data.txt). The data includes headers and uses tab as a separator.
As per the course assignment instructions I have commented the data and my code in 'create_learning2014.R'.

Done! :heavy_check_mark:


### 2. Create an analysis dataset (1p.)
In this part we created an analysis dataset which contains 7 variables: gender, age, attitude, deep, stra, surf and points. Some of these (attitude, deep, stra, surf, points) were made by combining questions in the learning2014 data, as defined in our Exercise Set and also on the bottom part of the [this page](http://www.helsinki.fi/~kvehkala/JYTmooc/JYTOPKYS2-meta.txt). The combination variables were scaled and observations where points = 0 were excluded. The data has now 166 observations and 7 variables. See my full comments and code in 'create_learning2014.R'.

Done! :heavy_check_mark:


### 3. [ ] Save new data set (3p.)
Set the working directory of your R session to the IODS Project folder (study how to do this with RStudio). Save the analysis dataset to the ‘data’ folder, using for example write_csv() function (readr package, part of tidyverse). You can name the data set for example as learning2014.csv. See ?write_csv for help or search the web for pointers and examples. Demonstrate that you can also read the data again by using read_csv().  (Use `str()` and `head()` to make sure that the structure of the data is correct).  (3 points)



## Analysis

The Analysis exercise focuses on performing and interpreting regression analysis. For completing the Analysis exercises, **<span style="color: red;">include all the codes, your interpretations and explanations in the R Markdown file chapter2.Rmd</span>**, which already exists in your course project folder. 

If you wish, you can knit the chapter2.Rmd file as a html document anytime to see how it looks. But for submission, the output of your Analysis should appear in your course diary. For this you need to update your local index.html file by knitting the index.Rmd file (which includes chapter2.Rmd as a child file) and then push the changes to GitHub.

**<span style="color: red;">Write a continuous report with a clear structure.</span>** There is no need to repeat the assignments in your course diary. The focus of your work should be on the clarity of your report. For full points **you should be able to show an understanding of the methods and results used in your analysis**. Feel free to also use material outside this course as learning sources. Clear, understandable and comprehensive explanations are worth full points.

R Markdown Hint: When you knit the document, the working directory is temporarily set to be the folder where your R Markdown file is located. This is good to be aware of when reading data for example.



### 1. Read and describe data
Read the students2014 data into R either from your local folder (if you completed the Data wrangling part) or from this url: https://raw.githubusercontent.com/KimmoVehkalahti/Helsinki-Open-Data-Science/master/datasets/learning2014.txt . (The separator is a comma "," and the file includes a header). Explore the structure and the dimensions of the data and describe the dataset briefly, assuming the reader has no previous knowledge of it. There is information related to the data [here](http://www.helsinki.fi/~kvehkala/JYTmooc/JYTOPKYS3-meta.txt). (0-2 points)

```{r}
library(readr)
# Read data
#lrn14a <- read.table("https://raw.githubusercontent.com/KimmoVehkalahti/Helsinki-Open-Data-Science/master/datasets/learning2014.txt", sep=",", header=TRUE)
lrn14a <- read_csv("data/learning2014.csv")
#Structure of the data
str(lrn14a)
# Dimensions and peek at the data
dim(lrn14a);head(lrn14a)


```

https://r4ds.had.co.nz/data-import.html
https://github.com/tidyverse/readr/issues/934

### 2. Graphical overview and summary
Show a graphical overview of the data and show summaries of the variables in the data. Describe and interpret the outputs, commenting on the distributions of the variables and the relationships between them. (0-3 points)


### 3. Regression model fitting
Choose three variables as explanatory variables and fit a regression model where exam points is the target (dependent, outcome) variable. Show a summary of the fitted model and comment and interpret the results. Explain and interpret the statistical test related to the model parameters. If an explanatory variable in your model does not have a statistically significant relationship with the target variable, remove the variable from the model and fit the model again without it. (0-4 points)


### 4. Interpret results
Using a summary of your fitted model, explain the relationship between the chosen explanatory variables and the target variable (interpret the model parameters). Explain and interpret the multiple R-squared of the model. (0-3 points)


### 5. Diagnostic plots
Produce the following diagnostic plots: Residuals vs Fitted values, Normal QQ-plot and Residuals vs Leverage. Explain the assumptions of the model and interpret the validity of those assumptions based on the diagnostic plots. (0-3 points)


### REPORT (Assignment 2)






### Resources
* [R for Health Data Science](https://argoshare.is.ed.ac.uk/healthyr_book/)
* [Cheatsheet for RMarkdown and ggplot2](https://posit.co/resources/cheatsheets/?_page=2/)
